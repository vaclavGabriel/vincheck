<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>
      Prověření vozidla zdarma a rychle. Kontrola stáří, motorizace, karoserie
      vozidla. | VIN Info.cz
    </title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <meta
      name="description"
      content="Kontrola vozidla v registru. Zkontrolujte VIN kód nebo číslo TP/ORV a získejte přístup k důležitým údajům spojeným s daným vozidlem. Kontrola stáří, barvy, motorizace a dalších údajů zdarma."
    />

    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-W4YSVMMPQ9"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-W4YSVMMPQ9");
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <nav
      class="navbar navbar-expand-lg navbar-dark fixed-top"
      style="background-color: #c6dbad"
    >
      <div class="container-fluid">
        <a class="navbar-brand text-muted" href="https://vininfo.cz/"
          >VIN Info.cz</a
        >
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link active text-dark" aria-current="page" href="/"
                >Kontrola VIN/TP/ORV</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link text-muted"
                href="https://online.pojisteni.cz/vozidla/srovnani?ap=AWYPy1"
                target="_blank"
                >Povinné ručení 🔗</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link text-muted"
                href="https://online.pojisteni.cz/vozidla/srovnani?ap=AWYPy1"
                target="_blank"
                >Havarijní pojištění 🔗</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link text-muted"
                href="https://cz.cebia.com/?vin"
                target="_blank"
                >Kompletní historie vozu 🔗</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container mt-5">
      <h2>Kontrola vozidla v registru</h2>
      <p>
        Při koupi ojetého vozidla je důležité prověřit jeho historii a technický
        stav. S naším nástrojem můžete zdarma zkontrolovat klíčové informace
        spojené s daným vozidlem v české registru vozidel. Stačí zadat VIN kód
        nebo číslo TP/ORV a získáte přístup k důležitým údajům.
      </p>

      <div class="row mt-5" id="searchSection">
        <div class="col-md-12 mb-1">
          <p>
            <strong>Tip:</strong> VIN kód je unikátní identifikátor vozidla
            skládající se ze 17 znaků. Můžete také využít unikátní
            identifikátory vozidel v České republice, jako je číslo TP (číslo
            velkého technického průkazu) nebo číslo ORV (Osvědčení o registraci
            vozidla, známé také jako "malý techničák").
          </p>
        </div>

        <div class="col-md-6">
          <label for="vinInput" class="form-label">Zadejte VIN kód:</label>
          <input
            type="text"
            class="form-control"
            id="vinInput"
            placeholder="Např. WF0FXXWPCFHD05923"
          />
        </div>
        <div
          class="col-md-6 d-flex align-items-end justify-content-md-end mt-md-0 mt-3"
        >
          <button
            class="btn btn-primary w-100"
            onclick="getVehicleInfo()"
            id="getInfoBtn"
            disabled
          >
            Vyhledat vozidlo dle VIN
          </button>
        </div>

        <div class="col-md-6 mt-5">
          <label for="tpInput" class="form-label">Zadejte číslo TP:</label>
          <input
            type="text"
            class="form-control"
            id="tpInput"
            placeholder="Např. UI036202"
          />
        </div>
        <div
          class="col-md-6 d-flex align-items-end justify-content-md-end mt-md-0 mt-3"
        >
          <button
            class="btn btn-primary w-100"
            onclick="getVehicleInfo()"
            id="getTpInfoBtn"
            disabled
          >
            Vyhledat vozidlo dle TP
          </button>
        </div>

        <div class="col-md-6 mt-5">
          <label for="orvInput" class="form-label">Zadejte číslo ORV:</label>
          <input
            type="text"
            class="form-control"
            id="orvInput"
            placeholder="Např. UAA000000"
          />
        </div>
        <div
          class="col-md-6 d-flex align-items-end justify-content-md-end mt-md-0 mt-3"
        >
          <button
            class="btn btn-primary w-100"
            onclick="getVehicleInfo()"
            id="getOrvInfoBtn"
            disabled
          >
            Vyhledat vozidlo dle ORV
          </button>
        </div>

        <div id="errorEl" class="mt-4 mb-1"></div>

        <div class="jumbotron jumbotron-fluid">
          <div class="container">
            <h4 class="">Umíme zdarma zobrazit následující údaje:</h4>
            <!-- <h1 class="display-5">Umíme zdarma zobrazit následující údaje:</h1> -->
            <p class="">
              ✅ Základní údaje o vozidle <br />
              ✅ Datum první registrace <br />
              ✅ Platnost technické prohlídky STK <br />
              ✅ Technické údaje o vozidle <br />
              ✅ Více než 90 dalších údajů <br />
              ❌ Vozidlo musí být v českém registru vozidel <br />
            </p>
          </div>
        </div>
      </div>

      <div
        id="newSearch"
        class="mt-4"
        style="display: none; justify-content: center"
      >
        <button
          class="btn btn-primary w-75"
          onclick="hideVehicleInfoContainer()"
        >
          Vyhledat jiné vozidlo
        </button>
      </div>
      <div id="vehicleInfo" class="mt-4 mb-5"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      function getVehicleInfo() {
        const vin = document
          .getElementById("vinInput")
          .value.replace(/[^a-zA-Z0-9]/g, "");
        const tp = document
          .getElementById("tpInput")
          .value.replace(/[^a-zA-Z0-9]/g, "");
        const orv = document
          .getElementById("orvInput")
          .value.replace(/[^a-zA-Z0-9]/g, "");

        const url =
          "https://corsproxy.io/?" +
          encodeURIComponent(
            vin
              ? `https://www.dataovozidlech.cz/api/Vozidlo/GetVehicleInfo?vin=${vin}`
              : tp
              ? `https://www.dataovozidlech.cz/api/Vozidlo/GetVehicleInfo?tp=${tp}`
              : `https://www.dataovozidlech.cz/api/Vozidlo/GetVehicleInfo?orv=${orv}`
          );

        fetch(url)
          .then((response) => response.json())
          .then((data) => {
            const infoDiv = document.createElement("div");
            infoDiv.classList.add("row", "mt-5", "mb-5", "align-items-center");

            const brandLogoSrc = getLogoSrc(
              data.find((item) => item.name === "TovarniZnacka")?.value
            );
            const brandLogoCol = document.createElement("div");
            brandLogoCol.classList.add("col-md-3", "text-center");
            const brandLogo = document.createElement("img");
            brandLogo.src = brandLogoSrc;
            brandLogo.alt = "Brand Logo";
            brandLogo.style.maxWidth = "200px";
            brandLogo.style.paddingRight = "40px";
            brandLogo.classList.add("img-fluid", "logo-img");
            brandLogoCol.appendChild(brandLogo);
            infoDiv.appendChild(brandLogoCol);

            const vehicleInfoCol = document.createElement("div");
            vehicleInfoCol.classList.add("col-md-4");
            const vehicleInfo = document.createElement("div");
            vehicleInfo.classList.add("vehicle-info");
            const brand =
              data.find((item) => item.name === "TovarniZnacka")?.value ||
              "Neznámá značka";
            const model =
              data.find((item) => item.name === "Typ")?.value ||
              "Neznámý model";
            const obchodniOznaceni =
              data.find((item) => item.name === "ObchodniOznaceni")?.value ||
              "";
            const firstRegistration =
              data.find((item) => item.name === "DatumPrvniRegistrace")
                ?.value || "Neznámé datum";
            const vinCode =
              data.find((item) => item.name === "VIN")?.value || "Neznámý VIN";
            vehicleInfo.innerHTML = `
                            <div><strong>Značka:</strong> ${brand}</div>
                            <div><strong>Model:</strong> ${model}</div>
                            <div><strong>Obchodní označení:</strong> ${obchodniOznaceni}</div>
                            <div><strong>Datum první registrace:</strong> ${firstRegistration}</div>
                            <div><strong>VIN:</strong> ${vinCode}</div>
                        `;
            vehicleInfoCol.appendChild(vehicleInfo);
            infoDiv.appendChild(vehicleInfoCol);

            const techInspectionCol = document.createElement("div");
            techInspectionCol.classList.add("col-md-4");
            const techInspection =
              data.find(
                (item) => item.name === "PravidelnaTechnickaProhlidkaDo"
              )?.value || "Neznámé datum";
            const techInspectionDiv = document.createElement("div");

            const povButtonDiv = document.createElement("div");

            const currentDate = new Date(); // Current date object

            // Parse the techInspection date string in the format "dd.MM.yyyy"
            const [day, month, year] = techInspection.split(".");
            const techInspectionDate = new Date(`${year}-${month}-${day}`);
            const techInspectionTime = techInspectionDate.getTime(); // Time in milliseconds

            const techInspectionDisplay = techInspection; // Display format is unchanged

            techInspectionDiv.innerHTML = `<strong>Pravidelná technická prohlídka do:</strong> <span style="color: ${
              techInspectionTime > currentDate.getTime() ? "green" : "red"
            }">${techInspectionDisplay}</span>`;
            techInspectionCol.appendChild(techInspectionDiv);

            povButtonDiv.innerHTML = `<a href="https://online.pojisteni.cz/vozidla/srovnani?ap=AWYPy1" class="btn btn-outline-primary w-90 mt-1 mb-1" role="button">Sjednat povinné ručení 🔗</a>
                  <a href="https://online.pojisteni.cz/vozidla/srovnani?ap=AWYPy1" class="btn btn-outline-primary w-90 mt-1 mb-1" role="button">Sjednat havarijní pojištění 🔗</a>
                  <br>
                  <a href="https://cz.cebia.com/?vin=${vinCode}" class="btn btn-outline-primary w-100 mt-1 mb-1" role="button">Zobrazit historii vozu 🔗</a>
                `;

            techInspectionCol.appendChild(povButtonDiv);

            infoDiv.appendChild(techInspectionCol);

            const vehicleInfoContainer = document.getElementById("vehicleInfo");
            vehicleInfoContainer.innerHTML = "";
            vehicleInfoContainer.appendChild(infoDiv);

            searchSection.style.display = "none";
            newSearch.style.display = "flex";

            let tableHtml = '<table class="table mt-4">';
            data.forEach((item) => {
              let itemValue = item.value;

              // Convert itemValue to string if it's not already a string
              if (typeof itemValue !== "string") {
                itemValue = String(itemValue);
              }

              // Check if itemValue contains "\n" and replace it with <br>
              if (itemValue.includes("\n")) {
                itemValue = itemValue.split("\n").join("<br>");
              }

              if (
                item.name !== "TovarniZnacka" &&
                item.name !== "Typ" &&
                item.name !== "DatumPrvniRegistrace" &&
                item.name !== "VIN" &&
                item.name !== "PravidelnaTechnickaProhlidkaDo" &&
                item.value !== ""
              ) {
                tableHtml += `<tr><th>${item.label}</th><td>${itemValue}</td></tr>`;
              }
            });
            tableHtml += "</table>";
            vehicleInfoContainer.innerHTML += tableHtml;
          })
          .catch((error) => {
            console.error("Chyba při načítání dat:", error);
            document.getElementById("errorEl").innerHTML =
              '<p class="text-danger">Chyba při načítání dat. Zadaný VIN/TP/ORV pravděpodobně neexistuje v Registru silničních vozidel.<br>Zkontrolujte kód a zkuste to znovu.</p>';
          });
      }

      function getLogoSrc(brand) {
        const brandLogos = {
          "ALFA-ROMEO": "logos/alfa-romeo.svg",
          AUDI: "logos/audi.svg",
          BMW: "logos/bmw.svg",
          CHEVROLET: "logos/chevrolet.svg",
          CITROEN: "logos/citroen.svg",
          CUPRA: "logos/cupra.svg",
          DACIA: "logos/dacia.svg",
          FERRARI: "logos/ferrari.svg",
          FIAT: "logos/fiat.svg",
          FORD: "logos/ford.svg",
          HONDA: "logos/honda.svg",
          HYUNDAI: "logos/hyundai.svg",
          KIA: "logos/kia.svg",
          LANCIA: "logos/lancia.svg",
          "LAND-ROVER": "logos/land-rover.svg",
          MAZDA: "logos/mazda.svg",
          "MERCEDES-BENZ": "logos/mercedes-benz.svg",
          MITSUBISHI: "logos/mitsubishi.svg",
          OPEN: "logos/opel.svg",
          PEUGEOT: "logos/peugeot.svg",
          PORSCHE: "logos/porsche.svg",
          RENAULT: "logos/renault.svg",
          SAAB: "logos/saab.svg",
          SEAT: "logos/seat.svg",
          SKODA: "logos/skoda.svg",
          ŠKODA: "logos/skoda.svg",
          TOYOTA: "logos/toyota.svg",
          VOLKSWAGEN: "logos/volkswagen.svg",
          VOLVO: "logos/volvo.svg",
          VW: "logos/volkswagen.svg",
        };

        return brandLogos[brand] || "logos/default_logo.svg";
      }

      const vinInput = document.getElementById("vinInput");
      const tpInput = document.getElementById("tpInput");
      const orvInput = document.getElementById("orvInput");

      const getInfoBtn = document.getElementById("getInfoBtn");
      const getTpInfoBtn = document.getElementById("getTpInfoBtn");
      const getOrvInfoBtn = document.getElementById("getOrvInfoBtn");

      function hideVehicleInfoContainer() {
        const element = document.getElementById("vehicleInfo");
        element.innerHTML = "";
        searchSection.style = null;
        newSearch.style.display = "none";
        vinInput.value = null;
        tpInput.value = null;
        orvInput.value = null;
        getInfoBtn.disabled = true;
        getTpInfoBtn.disabled = true;
        getOrvInfoBtn.disabled = true;
      }

      vinInput.addEventListener("input", () => {
        getInfoBtn.disabled = vinInput.value.trim().length != 17;
      });

      tpInput.addEventListener("input", () => {
        getTpInfoBtn.disabled =
          tpInput.value.trim().length < 6 || tpInput.value.trim().length > 10;
      });

      orvInput.addEventListener("input", () => {
        getOrvInfoBtn.disabled =
          orvInput.value.trim().length < 5 || orvInput.value.trim().length > 9;
      });

      vinInput.addEventListener("keypress", (event) => {
        if (event.key === "Enter") {
          event.preventDefault();
          getInfoBtn.click();
        }
      });

      tpInput.addEventListener("keypress", (event) => {
        if (event.key === "Enter") {
          event.preventDefault();
          getTpInfoBtn.click();
        }
      });

      orvInput.addEventListener("keypress", (event) => {
        if (event.key === "Enter") {
          event.preventDefault();
          getOrvInfoBtn.click();
        }
      });
    </script>

    <footer class="footer mt-auto py-3 bg-light m">
      <div class="container d-flex justify-content-between">
        <span class="text-muted" id="left"
          >Vin Info.cz | Kontrola vozidel zdarma</span
        >
        <span class="text-muted" id="right"
          >Zdroj dat:
          <a href="https://www.dataovozidlech.cz/" target="_blank"
            >Datová kostka</a
          ></span
        >
      </div>
    </footer>
  </body>
</html>
